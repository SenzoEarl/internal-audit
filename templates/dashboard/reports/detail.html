{% extends 'assets/base.html' %}

{% block title %}Report {{ audit.report_number }}{% endblock %}

{% block content %}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1>Report: {{ audit.report_number }}</h1>
        <div>
            <button class="btn btn-outline-secondary" data-app-action="report-share" data-audit-id="{{ audit.id }}">Share</button>
            <a href="{% url 'audit:report-dashboard' %}" class="btn btn-link">Back to reports</a>
        </div>
    </div>

    <section class="card mb-3">
      <div class="card-body">
        <h5 class="card-title">Audit Summary</h5>
        <dl class="row">
            <dt class="col-sm-3">Audit Date</dt><dd class="col-sm-9">{{ audit.audit_date }}</dd>
            <dt class="col-sm-3">Audit Number</dt><dd class="col-sm-9">{{ audit.audit_number }}</dd>
            <dt class="col-sm-3">Report Number</dt><dd class="col-sm-9">{{ audit.report_number }}</dd>
            <dt class="col-sm-3">Audit Type</dt><dd class="col-sm-9">{{ audit.get_audit_type_display }}</dd>
            <dt class="col-sm-3">Performed By</dt><dd class="col-sm-9">{{ audit.performed_by }}</dd>
        </dl>
      </div>
    </section>

    <section class="card mb-3">
      <div class="card-body">
        <h5 class="card-title">Project & Client</h5>
        <dl class="row">
            <dt class="col-sm-3">Project</dt><dd class="col-sm-9">{{ audit.project.title }} ({{ audit.project.permit_number }})</dd>
            <dt class="col-sm-3">Location</dt><dd class="col-sm-9">{{ audit.project.location }}</dd>
            <dt class="col-sm-3">Client</dt><dd class="col-sm-9">{{ audit.project.client.name }}</dd>
            <dt class="col-sm-3">Client Contact</dt><dd class="col-sm-9">{{ audit.project.client.contact_name }} &lt;{{ audit.project.client.contact_email }}&gt;</dd>
            <dt class="col-sm-3">Consulting Engineer</dt><dd class="col-sm-9">{{ audit.project.consulting_engineer.name }}</dd>
            <dt class="col-sm-3">Principal Contractor</dt><dd class="col-sm-9">{{ audit.project.principal_contractor.name }}</dd>
        </dl>
      </div>
    </section>

    <section class="card mb-3">
      <div class="card-body">
        <h5 class="card-title">Scores & Notices</h5>
        <dl class="row">
            <dt class="col-sm-3">Overall Score</dt><dd class="col-sm-9">{{ audit.overall_score_percentage }}%</dd>
            <dt class="col-sm-3">Standard Required</dt><dd class="col-sm-9">{{ audit.standard_required }}%</dd>
            <dt class="col-sm-3">Improvement Notices</dt><dd class="col-sm-9">{{ audit.improvement_notices }}</dd>
            <dt class="col-sm-3">Contravention Notices</dt><dd class="col-sm-9">{{ audit.contravention_notices }}</dd>
            <dt class="col-sm-3">Prohibition Notices</dt><dd class="col-sm-9">{{ audit.prohibition_notices }}</dd>
        </dl>
      </div>
    </section>

    <section class="card mb-3">
      <div class="card-body">
        <h5 class="card-title">Related Items</h5>
        <p>Action items, visual observations and other related records are available on the audit detail page.</p>
        <!-- Optionally list small subsets here -->
      </div>
    </section>

    {% include 'dashboard/reports/_share_modal.html' %}

{% endblock %}
